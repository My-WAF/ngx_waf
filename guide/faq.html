<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>FAQ | ngx_waf</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="A web application firewall module for nginx without complex configuration.">
    
    <link rel="preload" href="/ngx_waf/assets/css/0.styles.378ba274.css" as="style"><link rel="preload" href="/ngx_waf/assets/js/app.1c6e30ce.js" as="script"><link rel="preload" href="/ngx_waf/assets/js/2.d595dd2e.js" as="script"><link rel="preload" href="/ngx_waf/assets/js/19.d542749b.js" as="script"><link rel="prefetch" href="/ngx_waf/assets/js/10.dd17f640.js"><link rel="prefetch" href="/ngx_waf/assets/js/11.504a4aa8.js"><link rel="prefetch" href="/ngx_waf/assets/js/12.8a5702a9.js"><link rel="prefetch" href="/ngx_waf/assets/js/13.bcea64e3.js"><link rel="prefetch" href="/ngx_waf/assets/js/14.d25c6e4a.js"><link rel="prefetch" href="/ngx_waf/assets/js/15.0240a489.js"><link rel="prefetch" href="/ngx_waf/assets/js/16.7776b257.js"><link rel="prefetch" href="/ngx_waf/assets/js/17.dc347cd6.js"><link rel="prefetch" href="/ngx_waf/assets/js/18.216012ef.js"><link rel="prefetch" href="/ngx_waf/assets/js/20.7b9d4907.js"><link rel="prefetch" href="/ngx_waf/assets/js/21.93fb71c5.js"><link rel="prefetch" href="/ngx_waf/assets/js/22.f9910081.js"><link rel="prefetch" href="/ngx_waf/assets/js/23.35c2562b.js"><link rel="prefetch" href="/ngx_waf/assets/js/24.bae7f0e6.js"><link rel="prefetch" href="/ngx_waf/assets/js/25.00938ffa.js"><link rel="prefetch" href="/ngx_waf/assets/js/26.d32fbddb.js"><link rel="prefetch" href="/ngx_waf/assets/js/27.fa817229.js"><link rel="prefetch" href="/ngx_waf/assets/js/28.ae26bd28.js"><link rel="prefetch" href="/ngx_waf/assets/js/29.c52f351e.js"><link rel="prefetch" href="/ngx_waf/assets/js/3.a17a04fb.js"><link rel="prefetch" href="/ngx_waf/assets/js/30.0940cb2a.js"><link rel="prefetch" href="/ngx_waf/assets/js/31.2988ad65.js"><link rel="prefetch" href="/ngx_waf/assets/js/32.7d200157.js"><link rel="prefetch" href="/ngx_waf/assets/js/33.6a0b42d0.js"><link rel="prefetch" href="/ngx_waf/assets/js/34.155352f0.js"><link rel="prefetch" href="/ngx_waf/assets/js/35.d55eaaa7.js"><link rel="prefetch" href="/ngx_waf/assets/js/36.a3c8101f.js"><link rel="prefetch" href="/ngx_waf/assets/js/37.77dea8e9.js"><link rel="prefetch" href="/ngx_waf/assets/js/38.d366d651.js"><link rel="prefetch" href="/ngx_waf/assets/js/39.49359103.js"><link rel="prefetch" href="/ngx_waf/assets/js/4.e5a10528.js"><link rel="prefetch" href="/ngx_waf/assets/js/40.a04a04a1.js"><link rel="prefetch" href="/ngx_waf/assets/js/5.ada0f7ac.js"><link rel="prefetch" href="/ngx_waf/assets/js/6.311e36ec.js"><link rel="prefetch" href="/ngx_waf/assets/js/7.ff60b2bc.js"><link rel="prefetch" href="/ngx_waf/assets/js/8.1cafff0b.js"><link rel="prefetch" href="/ngx_waf/assets/js/9.989e8ae5.js">
    <link rel="stylesheet" href="/ngx_waf/assets/css/0.styles.378ba274.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ngx_waf/" class="home-link router-link-active"><!----> <span class="site-name">ngx_waf</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ngx_waf/guide/faq.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/ngx_waf/zh-cn/guide/faq.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/ADD-SP/ngx_waf/" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ngx_waf/guide/faq.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/ngx_waf/zh-cn/guide/faq.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/ADD-SP/ngx_waf/" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/ngx_waf/guide/" class="sidebar-heading clickable router-link-active open"><span>Quick Start</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ngx_waf/guide/overview.html" class="sidebar-link">Overview</a></li><li><a href="/ngx_waf/guide/version.html" class="sidebar-link">Version Description</a></li><li><a href="/ngx_waf/guide/compatibility.html" class="sidebar-link">Compatibility Statement</a></li><li><a href="/ngx_waf/guide/installation.html" class="sidebar-link">Installation Guide</a></li><li><a href="/ngx_waf/guide/configuration.html" class="sidebar-link">Configuration Guide</a></li><li><a href="/ngx_waf/guide/test.html" class="sidebar-link">Test</a></li><li><a href="/ngx_waf/guide/faq.html" aria-current="page" class="active sidebar-link">FAQ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ngx_waf/guide/faq.html#configure-error-the-ngx-http-waf-module-module-requires-the-uthash-library" class="sidebar-link">./configure: error: the ngxhttpwaf_module module requires the uthash library.</a></li><li class="sidebar-sub-header"><a href="/ngx_waf/guide/faq.html#how-does-this-module-perform" class="sidebar-link">How does this module perform?</a></li><li class="sidebar-sub-header"><a href="/ngx_waf/guide/faq.html#post-inspection-failure" class="sidebar-link">Post Inspection Failure</a></li><li class="sidebar-sub-header"><a href="/ngx_waf/guide/faq.html#fork-failed-while-spawning-worker-process-12-cannot-allocate-memory" class="sidebar-link">fork() failed while spawning &quot;worker process&quot; (12: Cannot allocate memory)</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ngx_waf/advance/" class="sidebar-heading clickable"><span>Advanced Guide</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h1> <h2 id="configure-error-the-ngx-http-waf-module-module-requires-the-uthash-library"><a href="#configure-error-the-ngx-http-waf-module-module-requires-the-uthash-library" class="header-anchor">#</a> ./configure: error: the ngx_http_waf_module module requires the uthash library.</h2> <p>This module requires the <code>uthash</code> library, which you can install via the package manager.</p> <h3 id="ubuntu-and-debian"><a href="#ubuntu-and-debian" class="header-anchor">#</a> Ubuntu And Debian</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> uthash-dev
</code></pre></div><h3 id="centos8"><a href="#centos8" class="header-anchor">#</a> Centos8</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>dnf --enablerepo<span class="token operator">=</span>PowerTools <span class="token function">install</span> uthash-devel
</code></pre></div><h3 id="alpine"><a href="#alpine" class="header-anchor">#</a> Alpine</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>apk update
apk <span class="token function">add</span> --upgrade uthash-dev
</code></pre></div><h3 id="other"><a href="#other" class="header-anchor">#</a> Other</h3> <p>See <a href="https://pkgs.org/download/uthash-devel" target="_blank" rel="noopener noreferrer">https://pkgs.org/download/uthash-devel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and
<a href="https://pkgs.org/download/uthash-dev" target="_blank" rel="noopener noreferrer">https://pkgs.org/download/uthash-dev<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="how-does-this-module-perform"><a href="#how-does-this-module-perform" class="header-anchor">#</a> How does this module perform?</h2> <p>The time complexity of IP inspecting and Anti Challenge Collapsar is O(1), and the other inspecting are O(nm), where n is the number of relevant rules and m is the time complexity of performing regular expression matching.</p> <h2 id="post-inspection-failure"><a href="#post-inspection-failure" class="header-anchor">#</a> Post Inspection Failure</h2> <p>For performance reasons, this module will inspect whether it is in the memory before inspecting the request body. If it is, it will inspect normally, otherwise skip the inspection. You can try to edit nginx.conf.</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">http</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">client_body_buffer_size</span><span class="token punctuation">:</span> <span class="token number">10</span>M<span class="token punctuation">;</span>
    <span class="token keyword">client_body_in_file_only</span><span class="token punctuation">:</span> off<span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_buffer_size" target="_blank" rel="noopener noreferrer">client_body_buffer_size<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
and <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_in_file_only" target="_blank" rel="noopener noreferrer">client_body_in_file_only<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="fork-failed-while-spawning-worker-process-12-cannot-allocate-memory"><a href="#fork-failed-while-spawning-worker-process-12-cannot-allocate-memory" class="header-anchor">#</a> fork() failed while spawning &quot;worker process&quot; (12: Cannot allocate memory)</h2> <p>It may be caused by excessive use of <code>nginx -s reload</code>. The module requests some memory when reading the configuration, but somehow the memory is not released immediately after <code>nginx -s reload</code>, so frequent <code>nginx -s reload</code> in a short period of time will most likely cause this error.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ADD-SP/ngx_waf/edit/master/docs/guide/faq.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/3/2021, 2:55:22 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ngx_waf/guide/test.html" class="prev">
        Test
      </a></span> <span class="next"><a href="/ngx_waf/advance/syntax.html">
        Configuration syntax
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/ngx_waf/assets/js/app.1c6e30ce.js" defer></script><script src="/ngx_waf/assets/js/2.d595dd2e.js" defer></script><script src="/ngx_waf/assets/js/19.d542749b.js" defer></script>
  </body>
</html>
